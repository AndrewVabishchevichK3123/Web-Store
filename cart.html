<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî –ì–∞–ª–µ—Ä–µ—è –û—Å–æ–±–Ω—è–∫–∞ –ë—Ä—é–ª–ª–æ–≤–∞</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="stylesheet" href="style.css" />

</head>
<body>
  <header>
    <div class="header-content">
      <img src="uzorleft.png" alt="" class="decor-left" />
      <div class="header-center">
        <img src="favicon.png" alt="–õ–æ–≥–æ" class="logo" />
        <h1>–ì–∞–ª–µ—Ä–µ—è –û—Å–æ–±–Ω—è–∫–∞ –ë—Ä—é–ª–ª–æ–≤–∞</h1>
      </div>
      <img src="uzorright.png" alt="" class="decor-right" />
    </div>
  </header>

  <nav>
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a> 
    <a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞</a>
    <a href="#">–û–± –û—Å–æ–±–Ω—è–∫–µ</a>
    <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
  </nav>

  <main>
    <div id="cart-items"></div>
    <div id="cart-total" class="cart-total"></div>
    <button id="checkout-btn" class="checkout-btn" style="display:none;">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    <a href="index.html" class="back-to-gallery">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–∞–ª–µ—Ä–µ—é</a>
  </main>

  <footer>
    <p>&copy; 2025 –ì–∞–ª–µ—Ä–µ—è –û—Å–æ–±–Ω—è–∫–∞ –ë—Ä—é–ª–ª–æ–≤–∞ | –í—ã–ø–æ–ª–Ω–∏–ª: –í–∞–±–∏—â–µ–≤–∏—á –ê. –í.</p>
  </footer>

<div id="order-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
    <form id="order-form">
      <label for="first-name">–ò–º—è:</label>
      <input type="text" id="first-name" required>

      <label for="last-name">–§–∞–º–∏–ª–∏—è:</label>
      <input type="text" id="last-name" required>

      <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
      <textarea id="address" rows="3" required></textarea>

      <label for="phone">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
      <input type="tel" id="phone" required>

      <button type="submit" class="checkout-btn">–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</button>
    </form>
  </div>
</div>

<script>
  const paintings = {
    "zakat-val-d-orcha": { title: "–ó–∞–∫–∞—Ç –≤ –í–∞–ª—å –¥'–û—Ä—á–∞", author: "–°–µ—Ä–≥–µ–µ–≤ –ê. –°.", price: 25000 },
    "ulochki-sieny": { title: "–£–ª–æ—á–∫–∏ –°–∏–µ–Ω—ã", author: "–°–µ—Ä–≥–µ–µ–≤ –ê. –°.", price: 12000 },
    "progulka": { title: "–ü—Ä–æ–≥—É–ª–∫–∞", author: "–ü–∏–º–µ–Ω–æ–≤ –í. –í.", price: 8300 },
    "prostori-italii": { title: "–ü—Ä–æ—Å—Ç–æ—Ä—ã –ò—Ç–∞–ª–∏–∏", author: "–ü–æ–∑–¥–Ω—è–∫–æ–≤–∞ –ê. –ú.", price: 7100 },
    "krasota-bez-izyanov": { title: "–ö—Ä–∞—Å–æ—Ç–∞ –±–µ–∑ –∏–∑—ä—è–Ω–æ–≤", author: "–õ–æ—à–∫–∞—Ä–µ–≤–∞ –°. –ì.", price: 19000 }
  };

  function getCartSet() {
    const cart = localStorage.getItem('cart');
    return cart ? new Set(JSON.parse(cart)) : new Set();
  }

  function saveCartSet(cartSet) {
    localStorage.setItem('cart', JSON.stringify(Array.from(cartSet)));
  }

  function renderCart() {
    const cart = getCartSet();
    const cartItemsEl = document.getElementById('cart-items');
    const cartTotalEl = document.getElementById('cart-total');
    const checkoutBtn = document.getElementById('checkout-btn');

    if (cart.size === 0) {
      cartItemsEl.innerHTML = '<p class="empty-cart">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
      cartTotalEl.style.display = 'none';
      checkoutBtn.style.display = 'none';
      return;
    }

    cartTotalEl.style.display = 'block';
    checkoutBtn.style.display = 'block';

    let html = '';
    let total = 0;

    cart.forEach(id => {
      const item = paintings[id];
      if (!item) return;
      total += item.price;
      html += `
        <div class="cart-item">
          <div>
            <strong>${item.title}</strong><br>
            <em>${item.author}</em>
          </div>
          <div>
            ${item.price.toLocaleString('ru-RU')} —Ä—É–±.
            <button class="remove-btn" data-id="${id}">üóëÔ∏è</button>
          </div>
        </div>
      `;
    });

    cartItemsEl.innerHTML = html;
    cartTotalEl.textContent = `–ò—Ç–æ–≥–æ: ${total.toLocaleString('ru-RU')} —Ä—É–±.`;

    document.querySelectorAll('.remove-btn').forEach(button => {
      button.addEventListener('click', function () {
        const id = this.dataset.id;
        const cart = getCartSet();
        cart.delete(id);
        saveCartSet(cart);
        renderCart();
      });
    });
  }

  const modal = document.getElementById('order-modal');
  const checkoutBtn = document.getElementById('checkout-btn');
  const closeBtn = document.querySelector('.close');
  const orderForm = document.getElementById('order-form');

  if (checkoutBtn) {
    checkoutBtn.addEventListener('click', (e) => {
      e.preventDefault();
      modal.style.display = 'flex';
    });
  }

  if (closeBtn) {
    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
    });
  }

  window.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  });

  if (orderForm) {
    orderForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const firstName = document.getElementById('first-name').value;
      const lastName = document.getElementById('last-name').value;
      const address = document.getElementById('address').value;
      const phone = document.getElementById('phone').value;

      alert('–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω!');
      
      localStorage.removeItem('cart');
      
      modal.style.display = 'none';
      
      renderCart();
    });
  }

  document.addEventListener('DOMContentLoaded', renderCart);
</script>

</body>

</html>